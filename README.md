# DustPress Components

A WordPress, DustPress and ACF Flexible Contents plugin for modular component structures.

## Installation

Install DustPress Components with Composer:

```
composer config repositories.dustpress-components git git@github.com:devgeniem/dustpress-components.git
composer require devgeniem/dustpress-components
```

## Components usage

### Clone Flexible Fields from Dustpress Components
Create an ACF Clone Field which clones `dpc_flexible_field` that is defined by DustPress Components plugin.

Example of a field group with cloned `dpc_flexible_field`:

```php
<?php

if( function_exists( 'acf_add_local_field_group' ) ):

acf_add_local_field_group(array (
    'key'       => 'group_cloned_dpc_flexible',
    'title'     => __( 'Components', 'theme_textdomain' ),
    'fields' => array (
        array (
            'key'               => 'field_cloned_dpc_flexible',
            'label'             => __( 'Components', 'theme-textdomain' ),
            'name'              => 'c',
            'type'              => 'clone',
            'instructions'      => __( 'Add new components from add_component', 'theme-textdomain' ),
            'required'          => 0,
            'conditional_logic' => 0,
            'wrapper' => array (
                'width' => '',
                'class' => '',
                'id'    => '',
            ),
            'clone' => array (
                0 => 'dpc_flexible_field',
            ),
            'display'       => 'seamless',
            'layout'        => 'block',
            'prefix_label'  => 0,
            'prefix_name'   => 1,
        ),
    ),
    // Location default page
    'location' => array (
        array (
            array (
                'param'     => 'page_template',
                'operator'  => '==',
                'value'     => 'default',
            ),
        )
    ),
    'menu_order'            => 100,
    'position'              => 'normal',
    'style'                 => 'default',
    'label_placement'       => 'top',
    'instruction_placement' => 'label',
    'hide_on_screen' => array (
        1 => 'the_content',
    ),
    'active'                => 1,
    'description'           => '',
));

endif;
```

DustPress Components contains components.dust file which loops through created components.
```dust
{#data.c}
	{>"before_component" /}
	{>"before_component_{acf_fc_layout}" /}
	{>"component_{acf_fc_layout}" /}
	{>"after_component_{acf_fc_layout}" /}
	{>"after_component" /}
{/data.c}
```

In your template file include `components.dust` with your cloned flexible field named as `c`.
You can have multiple component fields adding more allowed names (in addition to `c` with "dustpress/components/field_group_keys" filter).

```dust
{#Page.Content}

    {! Components !}
    {>"components" data=fields.c /}

{/Page.Content}
```

## Static fields

You can use DustPress Components as static components within your post templates as well.

Create an ACF Clone Field that clones your component's __clonable__ version that is automatically generated by the plugin.

```
    array (
        'key'                   => 'field_cloned_dpc_buttons',
        'label'                 => __('My static dustpress-component', 'theme-textdomain'),
        'name'                  => 'cloned_dpc_buttons',
        'type'                  => 'clone',
        'instructions'          => '',
        'required'              => 0,
        'conditional_logic'     => 0,
        'wrapper' => array (
            'width' => '',
            'class' => '',
            'id'    => ''
        ),
        'clone' => array (
            0 => 'clonable_dpc_buttons',
        ),
        'display'       => 'seamless',
        'layout'        => 'block',
        'prefix_label'  => 0,
        'prefix_name'   => 1
    ),
```